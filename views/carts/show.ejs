<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
  rel="stylesheet"
/>
<link rel="stylesheet" href="/stylesheets/style.css" />
<link rel="stylesheet" href="/stylesheets/cart.css" />

<%- include('../partials/_navbar') %>

<h2>Cart</h2>

<% if(cart.items.length === 0) { %>
<div class="row">
  <div class="col-sm-6 mb-3 mb-sm-0">
    <div class="card">
      <div class="card-body">
        <p>Your Cart is Empty.</p>
        <hr />
        <a href="/products" class="btn btn-outline-secondary"
          >Browse Products</a
        >
      </div>
    </div>
  </div>
</div>
<% } else { %>
<!-- <ul> -->
<!-- <li> -->
<% cart.items.forEach(item => { %>
<div class="row g-4">
  <div class="col-12 col-sm-6 col-md-4 col-lg-3">
    <div class="card">
      <div class="mb-4">
        <img
          src="/<%= item.product.img %>"
          class="card-img-top"
          alt="<%= item.product.name %>"
        />
        <br />
        <div class="card-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item"><%= item.product.name %></li>
            <li class="list-group-item"><%= item.product.price %> BD</li>
          </ul>
          <br />
          <!-- <div class="card-body"> -->
          <form
            method="POST"
            action="/carts/<%= cart._id %>/user/<%= user._id %>/items/<%= item._id %>"
          >
            <input
              type="number"
              class="form-control"
              name="quantity"
              id="quantity"
              value="<%= item.quantity %>"
              min="1"
              max="<%= item.product.quantity %>"
            />
            <br />
            <button type="submit" class="btn btn-outline-secondary">
              Update
            </button>
          </form>
          <form
            method="POST"
            action="/carts/<%= cart._id %>/user/<%= user._id %>/items/<%= item._id %>?_method=DELETE"
          >
            <button type="submit" class="btn btn-outline-danger">Remove</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<% }) %>

<!-- </li> -->
<!-- </ul> -->
<div class="row">
  <div class="col-sm-6 mb-3 mb-sm-0">
    <div class="card">
      <div class="card-body">
        <p>Total: <%= cart.total %> BD</p>
        <hr />
        <form action="/orders" method="POST">
          <button type="submit" class="btn btn-outline-dark">Checkout</button>
        </form>
      </div>
    </div>
  </div>
</div>
<% } %>
