<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<link rel="stylesheet" href="/stylesheets/style.css">

<%- include('../partials/_navbar') %>

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card shadow-sm">
        <div class="card-body text-center">
          <% if (user.img) { %>
            <img src="/<%= user.img %>" alt="Profile Image" class="rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
          <% } else { %>
            <img src="/uploads/default-profile.png" alt="Default Profile Image" class="rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
          <% } %>
          <h3 class="card-title mb-2"><%= user.username %></h3>
          <p class="mb-1"><i class="bi bi-envelope"></i> <strong>Email:</strong> <%= user.email %></p>
          <p class="mb-1"><i class="bi bi-telephone"></i><strong>Phone:</strong> <%= user.phone %></p>
          <p class="mb-3"><i class="bi bi-geo-alt"></i><strong>Address:</strong> <%= user.address %></p>
          <a href="/auth/profile/edit" class="btn btn-primary mb-3">Edit Profile</a>

            <a href="/products/seller" class="btn btn-outline-secondary mb-3 ms-2">
            <i class="bi bi-box-seam"></i> My Listings </a>

        </div>
      </div>
    </div>
  </div>

  <div class="row justify-content-center mt-4">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <h4 class="card-title">My Orders</h4>
          <% if (orders.length === 0) { %>
            <p class="text-muted">You have no orders yet.</p>
          <% } else { %>
            <ul class="list-group">
              <% orders.forEach(order => { %>
                <li class="list-group-item">
                  <a href="/orders/<%= order._id %>">
                    <strong>Order ID:</strong> <%= order._id %>
                  </a>
                  <span class="badge bg-info ms-2">Status: <%= order.status %></span>
                  <ul class="mt-2">
                    <% order.cartId.items.forEach(item => { %>
                      <li>
                        <%= item.product.name %> - Quantity: <%= item.quantity %>
                      </li>
                    <% }) %>
                  </ul>
                </li>
              <% }) %>
            </ul>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>
